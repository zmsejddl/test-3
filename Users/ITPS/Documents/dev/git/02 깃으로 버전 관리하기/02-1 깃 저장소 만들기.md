# 02-1 깃 저장소 만들기
- 깃으로 버전 관리를 하려면 폴더 안에 버전이 저장되는 공간이 필요한데 이것을 저장소(repository)라고 한다.

1. 깃 저장소를 만들기 전에 새로운 디렉터리를 만들어야 한다.
```bash
$ mkdir hello-git
$ cd hello-git
```
2. 안의 내용을 살표보기 위해 ls -la 명령을 사용한다. -l, -a를 함께 붙여서 사용 가능하다.
3. (.) 항목은 현재 디렉터리를 나타내고, 마침표가 2개인 항목은 (..)은 상위 디렉터리를 나타낸다.
4. 이 디렉터리에 저장소를 만들기 위해 터미널에 git init라고 입력한다. 현재 디렉터리에서 깃을 사용할 수 있도록 초기화하는 것이다.
```bash
$ git init
```
5. 이제부터 hello-git에서 깃을 사용할 수 있다
6. 디렉터리 안의 내용을 확인해 보면 .git이라는 디렉터리가 생겼을 거다. 이 폴더는 깃을 사용하면서 버전이 저장될 '저장소(repository)'이다.

# 02-2 버전 만들기
- 프로그램 개발에서는 수정 내용이 쌓이면 새로 번호를 붙여서 이전 상태와 구별한다. 이렇게 번호 등을 통해 구별하는 것을 버전이라고 한다.
- 깃에서도 문서를 수정할 때마다 버전을 만들면서 이전 상태와 구별한다.

**깃에서 버전이란**
- 깃에서 버전이란 문서를 수정하고 저장할 때마다 생기는 것이라고 생각하면 쉽다.
- 훨씬 쉽게 버전을 만들고, 또한 버전을 만든 시간과 수정 내용까지 기록할 수 있는 것이 바로 깃과 같은 버전 관리 시스템이다. 깃에서 버전을 관리하면 원래 파일 이름은 그대로 유지하면서 파일에서 무엇을 변경했는지를 변경 시점마다 저장할 수 있다. 또 버전마다 작업한 내용을 확인할 수 있고, 그 버전으로 되돌릴 수도 있다.

**스테이지와 커밋 이해하기**
- 작업 트리
    - 작업 트리는 파일 수정, 저장 등의 작업을 하는 디렉터리이다. 예를 들어 hello-git 디렉터리가 작업 트리이다.
- 스테이지
    - 스테이지는 버전으로 만들 파일이 대기하는 곳이다. 스테이징 영역이라고도 한다.
- 저장소
    - 저장소, 즉 리포지토리는 스테이지에서 대기하고 있던 파일들을 버전으로 만들어 저장하는 곳이다. 스테이지와 저장소는 .git 디렉터리 안에 숨은 파일 형태로 존재한다.
    - hello.txt 파일 문서를 수정하고 저장하면 그 파일은 작업 트리에 있게 된다. 그리고 수정한 hello.txt 파일을 스테이지에 넣는다. 다른 파일도 수정한 뒤 스테이지에 넣어둔다. 파일 수정을 끝내고 스테이지에 다 넣었다면 버전을 만들기 위해 깃에서 '커밋(commit)' 명령을 내린다. 그러면 새로운 버전이 생성되면서 스테이지에 대기하던 파일이 모두 저장소에 저장된다.
- 먼저 작업 트리에서 문서를 수정한다. 수정한 파일 가운데 버전으로 만들고 싶은 것을 스테이징 영역, 즉 스테이지에 저장한다. 그리고 스테이지에 있던 파일을 저장소로 커밋하면 버전이 만들어진다.

**작업 트리에서 문서 수정하기**
1. 먼저 깃 상태를 확인하기 위해 다음과 같이 입력해 본다
```bash
$ git status
```
- 1. On branch main(master): 현재 main 브랜치에 있다. 여기에서는 저장소에 들어 있는 디렉터리와 비슷한 것이라고 생각하면 된다.    
- 2. No commits yet: 아직 커밋한 파일이 없다는 뜻
- 3. nothing to commit: 현재 커밋할 파일이 없다는 뜻
3. hello-git 디렉터리에 새로운 파일을 만들어 보겠다.
```bash
$ vim hello.txt
```
4. 입력 모드에서 간단히 입력해본다. I 또는 A를 눌러 입력 모드로 바꾼다. ESC를 눌러 ex 모드로 바꾼 후 :wq를 입력한다.
5. 터미널 창에서 방금 만든 파일을 확인한다. ls -la를 입력한다.
6. 깃의 상태를 다시 한번 확인해 보겠다. (git status). 깃에서는 아직 한 번도 관리하지 않은 파일을 untracked files라고 한다

**수정한 파일을 스테이지에 올리기 - git add**
- 작업 트리에서 파일을 만들거나 수정했다면 스테이지에 수정한 파일을 추가한다. 이렇게 깃에게 버전 만들 준비를 하라고 알려주는 것을 스테이징(staging) 또는 스테이지에 올린다라고 표현한다
- 스테이징 내용은 .git/index 파일에 저장되므로 스테이지에 올리는 것을 '인덱스(index)에 등록한다'라고도 한다
1. 깃에서 스테이징할 때 사용하는 명령은 git add이다. 터미널에 다음과 같이 입력해도 아무 내용도 나타나지 않을 것이다
```bash
$ git add hello.txt
```
2. 깃의 상태 확인하기
```bash
$ git status
```
3. '새 파일 hello.txt를 (앞으로) 커밋할 것이다'라는 뜻이다
- 윈도우에서 스테이징할 때 경고 메시지가 나타나는 이유
- 텍스트 문서의 CRLF 문자를 LF 문자로 자동 변환해서 커밋할 것이라는 의미이다
- 윈도우에서 문서를 저장하면 줄이 바뀌는 자리에 눈에 보이지 않는 CR문자와 LF문자가 삽입된다. 리눅스와 맥에서는 문서를 저장할 때 줄이 바뀌는 자리에 LF 문자가 삽입된다

**스테이징한 파일 커밋하기 - git commit**
- 파일이 스테이징 영역에 있다면 이제 버전을 만들 수 있다. 버전 만드는 것을 깃에서는 커밋(commit)한다라고 한다. 커밋할 때는 버전의 변경 사항을 확인할 수 있도록 메시지를 함께 기록해 두어야 한다
1. 깃에서 파일을 커밋하는 명령은 git commit이다. 그리고 한 칸 띄운 후에 -m 옵션을 붙이고 커밋과 함께 저장할 메시지를 적는다. 이 메시지를 커밋 메시지라고 한다
```bash
$ git commit -m "숫자를 1 입력한 txt 문서 만듬"
```
2. 커밋한 후에 결과 메시지를 보면 파일 1개가 변경되었고(1file changed), 파일에 1개의 내용이 추가되었다(1 insertion(+))고 나타난다. 스테이지에 있던 hello.txt 파일이 저장소에 추가된 것이다
3. 커밋한 후 깃의 상태 보기
```bash
$ git status
```
4. 버전으로 만들 파일이 없고(nothing to commit), 작업 트리도 수정 사항 없이 깨끗하다(working tree clean)고 나타난다
5. 저장소에 저장된 버전을 확인할 때는 log 명령을 사용한다
```bash
$ git log
```
6. 커밋한 버전을 설명하는 정보가 나타난다. 커밋을 만든 사람과 시간, 커밋 메시지가 함께 보인다. 수정한 파일을 커밋하면 이렇게 수정과 관련된 여러 정보를 함께 저장할 수 있고 필요할 때 확인할 수도 있다

**스테이징과 커밋 한꺼번에 처리하기 - git commit -am**
- 수정한 파일을 하나씩 스테이지에 올려 두었다가 한꺼번에 커밋할 수도 있지만, 수정한 내용을 스테이지에 올리는 동시에 커밋까지 처리할 수도 있다. 단, 이 방법은 한 번이라도 커밋 한적이 있는 파일을 다시 커밋할 때만 사용할 수 있다
- -am 옵션은 all을 뜻하는 -a 옵션과 message를 뜻하는 -m 옵션을 함께 묶은 것이다. -a -m처럼 따로 적용해도 된다
1. hello.txt 파일을 다시 수정해서 스테이징과 커밋을 한꺼번에 해보겠다.
```bash
$ vim hello.txt
```
2. I나 A를 눌러 입력 모드로 바꾼다. 그리고 숫자 2를 추가한 후 ESC를 누르고 :wq를 입력해 저장하면서 편집기를 종료한다
3. -am 옵션을 붙여서 스테이징과 커밋을 한꺼번에 처리할 수 있다
```bash
$ git commit -am "message2"
```
4. 스테이징과 커밋을 한꺼번에 처리했다
5. 커밋한 정보를 확인한다
```bash
$ git log
```
6. 버전 2개가 나타나는데, 가장 최근 버전 정보가 'message2'라는 메시지와 함께 맨 위에 보인다